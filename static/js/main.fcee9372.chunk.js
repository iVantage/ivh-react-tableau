/*! For license information please see main.fcee9372.chunk.js.LICENSE.txt */
(this["webpackJsonpivh-react-tableau-example"]=this["webpackJsonpivh-react-tableau-example"]||[]).push([[0],[,,,function(e,t,r){e.exports=r(10)},function(e,t,r){},,,,,function(e,t,r){},function(e,t,r){"use strict";r.r(t);r(4);var n=r(0),o=r.n(n),a=r(2),i=r.n(a);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return e(t={exports:{}},t.exports),t.exports}var u="function"===typeof Symbol&&Symbol.for,p=u?Symbol.for("react.element"):60103,f=u?Symbol.for("react.portal"):60106,h=u?Symbol.for("react.fragment"):60107,d=u?Symbol.for("react.strict_mode"):60108,m=u?Symbol.for("react.profiler"):60114,y=u?Symbol.for("react.provider"):60109,b=u?Symbol.for("react.context"):60110,v=u?Symbol.for("react.async_mode"):60111,w=u?Symbol.for("react.concurrent_mode"):60111,g=u?Symbol.for("react.forward_ref"):60112,S=u?Symbol.for("react.suspense"):60113,E=u?Symbol.for("react.suspense_list"):60120,O=u?Symbol.for("react.memo"):60115,k=u?Symbol.for("react.lazy"):60116,P=u?Symbol.for("react.block"):60121,z=u?Symbol.for("react.fundamental"):60117,L=u?Symbol.for("react.responder"):60118,T=u?Symbol.for("react.scope"):60119;function j(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case p:switch(e=e.type){case v:case w:case h:case m:case d:case S:return e;default:switch(e=e&&e.$$typeof){case b:case g:case k:case O:case y:return e;default:return t}}case f:return t}}}function R(e){return j(e)===w}var C={AsyncMode:v,ConcurrentMode:w,ContextConsumer:b,ContextProvider:y,Element:p,ForwardRef:g,Fragment:h,Lazy:k,Memo:O,Portal:f,Profiler:m,StrictMode:d,Suspense:S,isAsyncMode:function(e){return R(e)||j(e)===v},isConcurrentMode:R,isContextConsumer:function(e){return j(e)===b},isContextProvider:function(e){return j(e)===y},isElement:function(e){return"object"===typeof e&&null!==e&&e.$$typeof===p},isForwardRef:function(e){return j(e)===g},isFragment:function(e){return j(e)===h},isLazy:function(e){return j(e)===k},isMemo:function(e){return j(e)===O},isPortal:function(e){return j(e)===f},isProfiler:function(e){return j(e)===m},isStrictMode:function(e){return j(e)===d},isSuspense:function(e){return j(e)===S},isValidElementType:function(e){return"string"===typeof e||"function"===typeof e||e===h||e===w||e===m||e===d||e===S||e===E||"object"===typeof e&&null!==e&&(e.$$typeof===k||e.$$typeof===O||e.$$typeof===y||e.$$typeof===b||e.$$typeof===g||e.$$typeof===z||e.$$typeof===L||e.$$typeof===T||e.$$typeof===P)},typeOf:j},_=(l((function(e,t){0})),l((function(e){e.exports=C})),Object.getOwnPropertySymbols),x=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;function $(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(o){return!1}})()&&Object.assign;var A="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function I(e,t,r,n,o){}I.resetWarningCache=function(){0};Function.call.bind(Object.prototype.hasOwnProperty);function N(){}function U(){}U.resetWarningCache=N;var W,D=l((function(e){e.exports=function(){function e(e,t,r,n,o,a){if(a!==A){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:U,resetWarningCache:N};return r.PropTypes=r,r}()})),M=((W={}).ERROR_NONE=null,W.ERROR_GENERIC="An error occurred while loading this dashboard.",W.ERROR_PERMISSIONS="You do not have permissions to view this dashboard.",W),V={credentials:"same-origin",headers:{"Content-Type":"application/json"}},q={url:D.string.isRequired,user:D.string,tableauTrustedUrl:D.string,filters:D.object,parameters:D.object,onDashboardLoad:D.func},Y={tableauTrustedUrl:"/api/tableau/trustedurl",filters:{},onDashboardLoad:function(){}},H=window.location.search.indexOf("debug")>-1,B=function(e){return new Promise((function(t,r){e.then((function(e){t(e)}),(function(e){r(e)}))}))},G=function(e){var t,r;function n(t){var r;return(r=e.call(this,t)||this).state={maxSize:{},minSize:{},preLoadParams:{},preLoadFilters:{},error:"ERROR_NONE",filters:t.filters,parameters:t.parameters,thirdPartyCookiesEnabled:!0},r.resizeListening=!1,r.resizeEventListener=r.resizeViz.bind(c(r)),r.messageEventListener=r.checkThirdPartyCookies.bind(c(r)),r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.resizeViz=function(){if(this.viz){var e=this.container.clientWidth,t=Object.hasOwnProperty.call(this.state.maxSize,"height")?this.state.maxSize.height:"500px";this.viz.setFrameSize(e,t)}},a.checkThirdPartyCookies=function(e){"ivantage:3PCunsupported"===e.data?(this.setState({thirdPartyCookiesEnabled:!1}),window.removeEventListener("message",this.messageEventListener)):"ivantage:3PCsupported"===e.data&&(this.setState({thirdPartyCookiesEnabled:!0}),window.removeEventListener("message",this.messageEventListener))},a.getTableau=function(){if(window.tableau)return Promise.resolve(window.tableau);var e=Date.now();return new Promise((function(t,r){var n=setInterval((function(){return window.tableau?(clearInterval(n),t(window.tableau)):Date.now()-e>6e4?(clearInterval(n),r(new Error("Timed out waiting for Tableau to become available."))):void 0}),100)}))},a.getTableauSyncUnsafe=function(){if(!window.tableau)throw new Error("Accessing window.tableau before it is available");return window.tableau},a.initTableau=function(e){var t=this;this.setState({maxSize:{},minSize:{}});var r,n,o=s({},this.props,this.state.preLoadParams,this.props.parameters,this.state.preLoadFilters,this.props.filters,{hideToolbar:!H,onFirstInteractive:(r=this.props.parameters,n=this.props.filters,function(){t.workbook=t.viz.getWorkbook(),t.activeSheet=t.workbook.getActiveSheet();var e=t.activeSheet.getSize();t.setState({maxSize:e.maxSize,minSize:e.minSize}),t.resizeListening||(window.addEventListener("resize",t.resizeEventListener),t.resizeListening=!0),t.props.onDashboardLoad(t.workbook),t.setState({filters:n,parameters:r}),Object.keys(t.state.preLoadParams).length&&(t.applyParameters(t.state.preLoadParams),t.setState({preLoadParams:{}})),Object.keys(t.state.preLoadFilters).length&&(t.applyFilters(t.state.preLoadFilters),t.setState({preLoadFilters:{}}))})});Object.keys(o).forEach((function(e){"undefined"===typeof o[e]&&delete o[e]})),Object.keys(o).forEach((function(e){"object"!==typeof o[e]||Array.isArray(o[e])||delete o[e]})),H&&(console.log("Creating viz..."),Object.keys(o).filter((function(e){return"onFirstInteractive"!==e})).forEach((function(e){console.log("...with initial option",e,o[e])}))),this.viz&&(this.viz.dispose(),this.viz=null,this.workbook=null),this.getTableau().then((function(r){t.viz=new r.Viz(t.container,e,o)})).catch((function(e){console.error(e)}))},a.initTrustedView=function(){var e=this,t=this.props,r=t.url,n=t.user,o=t.tableauTrustedUrl;if(!n){var a=r;return H&&(a+="&:record_performance=yes&:refresh"),void this.initTableau(a)}fetch(o+"?user="+n+"&url="+r,V).then((function(e){return 204===e.status?Promise.resolve():e.json().then((function(t){if(e.ok)return t;var n=new Error("Request to "+r+" failed with status "+e.status);return n.httpStatusCode=e.status,Promise.reject(n)}))})).then((function(t){var r=t.data.id+"&:revert=filters";H&&(r+="&:record_performance=yes&:refresh"),e.initTableau(r)})).catch((function(t){Object.hasOwnProperty.call(t,"httpStatusCode")&&401===t.httpStatusCode?e.setState({error:"ERROR_PERMISSIONS"}):e.setState({error:"ERROR_GENERIC"}),console.error(t)}))},a.applyFilters=function(e){var t=this;if(!this.workbook||!this.viz)return this.setState({preLoadFilters:s({},this.state.preLoadFilters,e)});B(this.viz.pauseAutomaticUpdatesAsync()).then((function(){return Promise.all(t.applyFiltersHelper(e))})).then((function(){return B(t.viz.resumeAutomaticUpdatesAsync())})).catch((function(e){console.error(e),t.viz.resumeAutomaticUpdatesAsync()}))},a.applyFiltersHelper=function(e){var t=this,r=[],n=this.getTableauSyncUnsafe(),o=[];this.activeSheet instanceof n.Worksheet?o.push(this.activeSheet):Array.prototype.push.apply(o,this.activeSheet.getWorksheets());var a=function(e){o.forEach((function(t){return r.push(B(t.applyFilterAsync(e,"",n.FilterUpdateType.ALL)))}))},i=function(i){var s=e[i];Object.hasOwnProperty.call(t.state.filters,i)&&s===t.state.filters[i]||(H&&console.log("Setting Tableau filter",i,s,"(was "+t.state.filters[i]+")"),s.length?o.forEach((function(e){r.push(B(e.applyFilterAsync(i,s,n.FilterUpdateType.REPLACE)))})):a(i))};for(var s in e)i(s);for(var c in this.state.filters)Object.hasOwnProperty.call(e,c)||(H&&console.log("Clearing Tableau filter",c,"(was "+this.state.filters[c]+")"),a(c));return this.setState({filters:e}),r},a.applyParameters=function(e){if(this.workbook&&this.viz){for(var t in e)Object.hasOwnProperty.call(this.state.parameters,t)&&e[t]===this.state.parameters[t]||(H&&console.log("Setting Tableau parameter",t,e[t],"(was "+this.state.parameters[t]+")"),this.workbook.changeParameterValueAsync(t,e[t]));this.setState({parameters:e})}else this.setState({preLoadParams:s({},this.state.preLoadParams,e)})},a.downloadWorkbook=function(){this.viz.showDownloadWorkbookDialog()},a.render=function(){var e=this,t=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(this.props,["url","user","tableauTrustedUrl","filters","filterTypes","parameters","onDashboardLoad"]);return o.a.createElement("div",null,o.a.createElement("iframe",{src:"https://ivantage.github.io/3rdpartycookiecheck/start.html",title:"Third-party cookie check",style:{display:"none"}}),!this.state.thirdPartyCookiesEnabled&&o.a.createElement("p",{className:"au-text-warning"},"You need to have third-party cookies enabled in order to view dashboards properly. Please make sure that your browser settings are configured to allow third-party cookies and try refreshing this page."),"ERROR_NONE"!==this.state.error&&o.a.createElement("p",{className:"au-text-warning"},M[this.state.error]),o.a.createElement("div",s({ref:function(t){return e.container=t}},t)))},a.componentDidMount=function(){this.initTrustedView(),window.addEventListener("message",this.messageEventListener)},a.componentDidUpdate=function(e){(e.url!==this.props.url||e.user!==this.props.user)&&(this.setState({error:"ERROR_NONE"}),this.initTrustedView())},a.componentWillReceiveProps=function(e){var t=e.url===this.props.url,r=e.filters!==this.props.filters||e.filterTypes!==this.props.filterTypes,n=e.parameters!==this.props.parameters;t&&n&&this.applyParameters(e.parameters),t&&r&&this.applyFilters(e.filters,e.filterTypes)},a.componentWillUnmount=function(){this.resizeListening&&(window.removeEventListener("resize",this.resizeEventListener),window.removeEventListener("message",this.messageEventListener))},n}(n.Component);G.propTypes=q,G.defaultProps=Y;var J=G;r(9);var K=()=>o.a.createElement(J,{url:"http://public.tableau.com/views/RegionalSampleWorkbook/College",filters:{"Academic Year":"2013"}});i.a.render(o.a.createElement(K,null),document.getElementById("root"))}],[[3,1,2]]]);
//# sourceMappingURL=main.fcee9372.chunk.js.map